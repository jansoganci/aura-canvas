(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{3646:(e,r,a)=>{"use strict";a.d(r,{F:()=>u});var t=a(5155),l=a(2115),s=a(2619),n=a.n(s),o=a(5379);async function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=await fetch("".concat("http://localhost:8787").concat(e),{...r,credentials:"include",headers:{"Content-Type":"application/json",...r.headers}}),t=await a.json();if(!a.ok)return{error:t.error||"Request failed with status ".concat(a.status)};return{data:t}}catch(e){return console.error("API request failed:",e),{error:"Network error. Please try again."}}}async function c(){return i("/session",{method:"GET"})}async function d(){return i("/session",{method:"POST"})}let u=()=>{let[e,r]=(0,l.useState)(null),[a,s]=(0,l.useState)(!1),{theme:i,setTheme:u}=(0,o.D)();return(0,l.useEffect)(()=>{s(!0)},[]),(0,l.useEffect)(()=>{!async function(){let{data:e,error:a}=await c();if(!a&&(null==e?void 0:e.session))r(e.session.credits);else{let{data:e}=await d();(null==e?void 0:e.session)&&r(e.session.credits)}}()},[]),(0,t.jsx)("nav",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[(0,t.jsxs)(n(),{href:"/",className:"flex items-center gap-2 text-foreground hover:text-aura-purple transition-colors",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-aura-purple to-aura-pink flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h1M3 12H2m15.325-4.675l.707-.707M6.071 18.071l-.707.707M17.325 18.675l.707.707M6.071 5.325l-.707-.707M7 12a5 5 0 1110 0 5 5 0 01-10 0z"})})}),(0,t.jsx)("span",{className:"font-bold text-lg",children:"Aura Canvas"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,t.jsx)("button",{onClick:()=>{u("dark"===i?"light":"dark")},className:"w-9 h-9 rounded-full flex items-center justify-center bg-card/80 backdrop-blur-sm text-muted hover:text-foreground transition-colors","aria-label":"Toggle theme",children:"dark"===i?(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),null!==e&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-card/80 backdrop-blur-sm rounded-full text-sm font-medium text-card-foreground shadow-sm",title:"Credits remaining",children:[(0,t.jsx)("span",{children:"\uD83C\uDF9F️"}),(0,t.jsx)("span",{children:e})]})]})]})})}},5063:(e,r,a)=>{Promise.resolve().then(a.bind(a,8197))},8197:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>w});var t=a(5155),l=a(2115),s=a(2619),n=a.n(s),o=a(8720),i=a(3646),c=a(8743),d=a(1963);let u={maxSizeMB:.5,maxWidthOrHeight:1200};async function x(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={...u,...r};try{return await (0,d.A)(e,{maxSizeMB:a.maxSizeMB,maxWidthOrHeight:a.maxWidthOrHeight,useWebWorker:!0,fileType:"image/jpeg"})}catch(r){return console.error("Image compression failed:",r),e}}async function h(e){return new Promise((r,a)=>{let t=new FileReader;t.onload=()=>r(t.result),t.onerror=a,t.readAsDataURL(e)})}async function m(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(await x(e,r))}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(e)}function p(){g(30)}let b=[{emoji:"\uD83D\uDE34",label:"Low"},{emoji:"\uD83D\uDE0C",label:"Chill"},{emoji:"\uD83D\uDE0A",label:"Good"},{emoji:"\uD83D\uDD25",label:"High"}],f=[{emoji:"\uD83C\uDF0A",label:"Water"},{emoji:"\uD83C\uDF3F",label:"Earth"},{emoji:"\uD83D\uDD25",label:"Fire"},{emoji:"⚡",label:"Energy"}],y={RED:"shadow-[0_0_60px_rgba(255,75,92,0.6)]",ORANGE:"shadow-[0_0_60px_rgba(255,173,105,0.6)]",YELLOW:"shadow-[0_0_60px_rgba(255,251,125,0.6)]",GREEN:"shadow-[0_0_60px_rgba(117,247,174,0.6)]",BLUE:"shadow-[0_0_60px_rgba(110,193,228,0.6)]",PURPLE:"shadow-[0_0_60px_rgba(199,125,255,0.6)]",PINK:"shadow-[0_0_60px_rgba(252,186,211,0.6)]",WHITE:"shadow-[0_0_60px_rgba(242,242,242,0.6)]"},j={RED:"text-aura-red",ORANGE:"text-aura-orange",YELLOW:"text-aura-yellow",GREEN:"text-aura-green",BLUE:"text-aura-blue",PURPLE:"text-aura-purple",PINK:"text-aura-pink",WHITE:"text-gray-600"};function w(){let e=(0,l.useRef)(null),[r,a]=(0,l.useState)(null),[s,d]=(0,l.useState)(null),[u,x]=(0,l.useState)(null),[h,w]=(0,l.useState)(!1),[k,v]=(0,l.useState)(null),N=r&&s&&u&&!h,C=(0,l.useCallback)(async e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(t){if(!t.type.startsWith("image/"))return void o.o.error("Please select an image file");try{let e=await m(t);a(e),v(null),p()}catch(e){o.o.error("Failed to process image"),console.error(e)}}},[]),_=(0,l.useCallback)(()=>{var r;null==(r=e.current)||r.click()},[]),E=(0,l.useCallback)(async()=>{if(N){w(!0),p();try{let e=await fetch("".concat("http://localhost:8787","/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:r,energy:s,element:u})}),a=await e.json();if(!e.ok){o.o.error(a.error||"Failed to read aura"),w(!1);return}v({color:a.color,description:a.description}),g([30,50,30])}catch(e){o.o.error("Something went wrong"),console.error(e)}finally{w(!1)}}},[N,r,s,u]),L=(0,l.useCallback)(()=>{if(!k)return;let e=k.color.charAt(0)+k.color.slice(1).toLowerCase(),r="My aura is ".concat(e,'! ✨\n\n"').concat(k.description,'"\n\nFind yours:'),a=window.location.origin;window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r),"&url=").concat(encodeURIComponent(a)),"_blank")},[k]),M=(0,l.useCallback)(()=>{a(null),d(null),x(null),v(null)},[]);if(k&&r){let e=k.color.charAt(0)+k.color.slice(1).toLowerCase();return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-aura-purple/20 via-aura-pink/20 to-aura-blue/20 dark:from-aura-purple/10 dark:via-aura-pink/10 dark:to-aura-blue/10",children:[(0,t.jsx)(i.F,{}),(0,t.jsx)("main",{className:"flex-grow flex flex-col items-center justify-center px-4 py-8",children:(0,t.jsxs)("div",{className:"w-full max-w-sm",children:[(0,t.jsx)("div",{className:"mb-8 rounded-2xl ".concat(y[k.color]," transition-shadow duration-500"),children:(0,t.jsx)("img",{src:r,alt:"Your photo",className:"w-full aspect-square object-cover rounded-2xl"})}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Your Aura is"}),(0,t.jsx)("h2",{className:"text-4xl font-bold mb-4 ".concat(j[k.color]),children:e}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:['"',k.description,'"']})]}),(0,t.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-3 mb-6",children:(0,t.jsx)("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 text-center",children:"\uD83D\uDCF8 Screenshot to save! We don't store your photo."})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("button",{onClick:L,className:"w-full flex items-center justify-center gap-2 py-3 px-6 bg-black text-white rounded-xl font-medium hover:bg-gray-800 transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share on X"]}),(0,t.jsx)("button",{onClick:M,className:"w-full py-3 px-6 bg-white dark:bg-gray-800 rounded-xl font-medium text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border border-gray-200 dark:border-gray-700",children:"Try Again"}),(0,t.jsx)(n(),{href:"/",className:"block w-full text-center py-3 px-6 text-gray-500 dark:text-gray-400 hover:text-aura-purple transition-colors",children:"Back to Home"})]})]})}),(0,t.jsx)(c.w,{})]})}return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-aura-purple/20 via-aura-pink/20 to-aura-blue/20 dark:from-aura-purple/10 dark:via-aura-pink/10 dark:to-aura-blue/10",children:[(0,t.jsx)(i.F,{}),(0,t.jsx)("main",{className:"flex-grow flex flex-col items-center justify-center px-4 py-8",children:(0,t.jsxs)("div",{className:"w-full max-w-sm space-y-6",children:[(0,t.jsxs)(n(),{href:"/",className:"inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-aura-purple transition-colors",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,t.jsx)("div",{onClick:_,className:"\n              aspect-square rounded-2xl cursor-pointer\n              flex items-center justify-center\n              transition-all duration-200\n              ".concat(r?"bg-transparent":"bg-white/50 dark:bg-white/10 border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-aura-purple","\n            "),children:r?(0,t.jsx)("img",{src:r,alt:"Your photo",className:"w-full h-full object-cover rounded-2xl"}):(0,t.jsxs)("div",{className:"text-center p-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Tap to add photo"})]})}),(0,t.jsx)("input",{ref:e,type:"file",accept:"image/*",capture:"user",onChange:C,className:"hidden"}),r&&(0,t.jsxs)("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm rounded-2xl p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-3 text-center",children:"How's your energy?"}),(0,t.jsx)("div",{className:"flex justify-between gap-2",children:b.map(e=>(0,t.jsx)("button",{onClick:()=>{d(e.label),p()},className:"\n                        flex-1 py-3 rounded-xl text-center\n                        transition-all duration-200\n                        ".concat(s===e.label?"bg-aura-purple text-white scale-105":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700","\n                      "),children:(0,t.jsx)("span",{className:"text-2xl block",children:e.emoji})},e.label))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-3 text-center",children:"Pick your element"}),(0,t.jsx)("div",{className:"flex justify-between gap-2",children:f.map(e=>(0,t.jsx)("button",{onClick:()=>{x(e.label),p()},className:"\n                        flex-1 py-3 rounded-xl text-center\n                        transition-all duration-200\n                        ".concat(u===e.label?"bg-aura-purple text-white scale-105":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700","\n                      "),children:(0,t.jsx)("span",{className:"text-2xl block",children:e.emoji})},e.label))})]})]}),(0,t.jsx)("button",{onClick:E,disabled:!N,className:"\n              w-full py-4 rounded-xl font-semibold text-lg\n              transition-all duration-200\n              ".concat(N?"bg-gradient-to-r from-aura-purple to-aura-pink text-white hover:opacity-90 active:scale-95":"bg-gray-200 dark:bg-gray-800 text-gray-400 cursor-not-allowed","\n            "),children:h?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Reading your aura..."]}):"Read My Aura"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"\uD83D\uDD12 Your photo is not stored • \uD83E\uDD16 Powered by AI"})]})}),(0,t.jsx)(c.w,{})]})}},8743:(e,r,a)=>{"use strict";a.d(r,{w:()=>l});var t=a(5155);a(2115);let l=()=>(0,t.jsx)("footer",{className:"px-4 py-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Aura Canvas"]})})}},e=>{e.O(0,[818,619,963,441,255,358],()=>e(e.s=5063)),_N_E=e.O()}]);